import { h } from "/assets/js/vendor/hyperapp.js";
import rough from "/assets/js/vendor/rough.js";
import uuid from "/assets/js/vendor/uuid.js";

export default (props = {}) => {
	let proto;
	const new_props = {
		...props,
		key: props.key || uuid(),
		xmlns: "http://www.w3.org/2000/svg",
		viewBox: "-1 -1 37 37",
		width: (props.size || 1) * 16,
		height: (props.size || 1) * 16,
		oncreate: el => {
			const svg = rough.svg(el, {
				options: props.options || {
					roughness: 0.1,
					strokeWidth: 0.2,
					fillStyle: "solid",
				}
			});

			if (proto) {
				el.parentNode.replaceChild(proto.cloneNode(true), el);
			} else {
				el.appendChild(svg["path"]("M7 25h22v9H7zm0-11h22v9H7zM7 3h22v10H7z", {["fill"]: "#3B88C3",["d"]: "M7 25h22v9H7zm0-11h22v9H7zM7 3h22v10H7z",}));el.appendChild(svg["path"]("M30 3.178c0 .454-.368.822-.822.822H6.822C6.368 4 6 3.632 6 3.178v-.356C6 2.368 6.368 2 6.822 2h22.355c.455 0 .823.368.823.822v.356zm0 11c0 .454-.368.822-.822.822H6.822C6.368 15 6 14.632 6 14.178v-.355c0-.455.368-.823.822-.823h22.355c.455 0 .823.368.823.822v.356zm0 10c0 .454-.368.822-.822.822H6.822C6.368 25 6 24.632 6 24.178v-.355c0-.455.368-.823.822-.823h22.355c.455 0 .823.368.823.822v.356zm0 11c0 .454-.368.822-.822.822H6.822C6.368 36 6 35.632 6 35.178v-.355c0-.455.368-.823.822-.823h22.355c.455 0 .823.368.823.822v.356z", {["fill"]: "#269",["d"]: "M30 3.178c0 .454-.368.822-.822.822H6.822C6.368 4 6 3.632 6 3.178v-.356C6 2.368 6.368 2 6.822 2h22.355c.455 0 .823.368.823.822v.356zm0 11c0 .454-.368.822-.822.822H6.822C6.368 15 6 14.632 6 14.178v-.355c0-.455.368-.823.822-.823h22.355c.455 0 .823.368.823.822v.356zm0 10c0 .454-.368.822-.822.822H6.822C6.368 25 6 24.632 6 24.178v-.355c0-.455.368-.823.822-.823h22.355c.455 0 .823.368.823.822v.356zm0 11c0 .454-.368.822-.822.822H6.822C6.368 36 6 35.632 6 35.178v-.355c0-.455.368-.823.822-.823h22.355c.455 0 .823.368.823.822v.356z",}));el.appendChild(svg["path"]("M26 1.128c0 .481-.391.872-.872.872h-2.256C22.391 2 22 1.609 22 1.128V.872c0-.481.391-.872.872-.872h2.256c.481 0 .872.391.872.872v.256z", {["fill"]: "#99AAB5",["d"]: "M26 1.128c0 .481-.391.872-.872.872h-2.256C22.391 2 22 1.609 22 1.128V.872c0-.481.391-.872.872-.872h2.256c.481 0 .872.391.872.872v.256z",}));
				proto = el;
			}
		},
	};
	delete new_props.options;

	return h("svg", new_props);
};