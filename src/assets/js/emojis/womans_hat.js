import { h } from "/assets/js/vendor/hyperapp.js";
import rough from "/assets/js/vendor/rough.js";
import uuid from "/assets/js/vendor/uuid.js";

export default (props = {}) => {
	let proto;
	const new_props = {
		...props,
		key: props.key || uuid(),
		xmlns: "http://www.w3.org/2000/svg",
		viewBox: "-1 -1 37 37",
		width: (props.size || 1) * 16,
		height: (props.size || 1) * 16,
		oncreate: el => {
			const svg = rough.svg(el, {
				options: props.options || {
					roughness: 0.1,
					strokeWidth: 0.2,
					fillStyle: "solid",
				}
			});

			if (proto) {
				el.parentNode.replaceChild(proto.cloneNode(true), el);
			} else {
				el.appendChild(svg["ellipse"](18, 23, 36, 10, {["rx"]: "18",["cy"]: "23",["ry"]: "5",["fill"]: "#FFD983",["cx"]: "18",}));el.appendChild(svg["path"]("M29 17c0 1.566-4.925 6-11 6S7.043 18.566 7.043 17C7.043 10 14 7 18 7s11 3 11 10z", {["fill"]: "#FFD983",["d"]: "M29 17c0 1.566-4.925 6-11 6S7.043 18.566 7.043 17C7.043 10 14 7 18 7s11 3 11 10z",}));el.appendChild(svg["path"]("M29 21c-5 3-17 3-22 0 0-.492.043-3.535.043-4C13 20 23 20 29 17c-.003.465 0 3.508 0 4z", {["fill"]: "#9266CC",["d"]: "M29 21c-5 3-17 3-22 0 0-.492.043-3.535.043-4C13 20 23 20 29 17c-.003.465 0 3.508 0 4z",}));el.appendChild(svg["ellipse"](18, 24, 2, 4, {["rx"]: "1",["cy"]: "24",["ry"]: "2",["fill"]: "#FFF",["cx"]: "18",}));el.appendChild(svg["ellipse"](18, 18, 2, 4, {["rx"]: "1",["cy"]: "18",["ry"]: "2",["fill"]: "#FFF",["cx"]: "18",}));el.appendChild(svg["path"]("M16.586 23.828c-.781.781-1.731 1.098-2.121.707-.391-.391-.074-1.34.707-2.121.781-.781 1.73-1.098 2.122-.707.39.391.073 1.341-.708 2.121zm4.242-4.242c-.78.781-1.73 1.098-2.121.707-.391-.391-.074-1.34.707-2.122.781-.781 1.73-1.098 2.121-.707.391.391.074 1.341-.707 2.122z", {["fill"]: "#FFF",["d"]: "M16.586 23.828c-.781.781-1.731 1.098-2.121.707-.391-.391-.074-1.34.707-2.121.781-.781 1.73-1.098 2.122-.707.39.391.073 1.341-.708 2.121zm4.242-4.242c-.78.781-1.73 1.098-2.121.707-.391-.391-.074-1.34.707-2.122.781-.781 1.73-1.098 2.121-.707.391.391.074 1.341-.707 2.122z",}));el.appendChild(svg["path"]("M15 22c-1.105 0-2-.448-2-1 0-.553.896-1 2-1 1.105 0 2 .447 2 1s-.896 1-2 1zm6 0c-1.104.001-2-.447-2-1s.896-1 2-1 2 .447 2 1c0 .552-.896 1-2 1z", {["fill"]: "#FFF",["d"]: "M15 22c-1.105 0-2-.448-2-1 0-.553.896-1 2-1 1.105 0 2 .447 2 1s-.896 1-2 1zm6 0c-1.104.001-2-.447-2-1s.896-1 2-1 2 .447 2 1c0 .552-.896 1-2 1z",}));el.appendChild(svg["path"]("M15.172 19.587c-.782-.782-1.098-1.732-.707-2.122.391-.391 1.34-.074 2.121.707.781.782 1.098 1.73.707 2.121-.391.392-1.341.074-2.121-.706zm4.242 4.242c-.782-.78-1.098-1.73-.707-2.121.391-.392 1.34-.074 2.121.707.781.78 1.098 1.73.707 2.121-.389.39-1.34.074-2.121-.707z", {["fill"]: "#FFF",["d"]: "M15.172 19.587c-.782-.782-1.098-1.732-.707-2.122.391-.391 1.34-.074 2.121.707.781.782 1.098 1.73.707 2.121-.391.392-1.341.074-2.121-.706zm4.242 4.242c-.782-.78-1.098-1.73-.707-2.121.391-.392 1.34-.074 2.121.707.781.78 1.098 1.73.707 2.121-.389.39-1.34.074-2.121-.707z",}));el.appendChild(svg["circle"](18, 21, 4, {["cy"]: "21",["r"]: "2",["fill"]: "#FFAC33",["cx"]: "18",}));
				proto = el;
			}
		},
	};
	delete new_props.options;

	return h("svg", new_props);
};