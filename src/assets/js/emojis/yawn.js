import { h } from "/assets/js/vendor/hyperapp.js";
import rough from "/assets/js/vendor/rough.js";
import uuid from "/assets/js/vendor/uuid.js";

export default (props = {}) => {
	let proto;
	const new_props = {
		...props,
		key: props.key || uuid(),
		xmlns: "http://www.w3.org/2000/svg",
		viewBox: "-1 -1 37 37",
		width: (props.size || 1) * 16,
		height: (props.size || 1) * 16,
		oncreate: el => {
			const svg = rough.svg(el, {
				options: props.options || {
					roughness: 0.1,
					strokeWidth: 0.2,
					fillStyle: "solid",
				}
			});

			if (proto) {
				el.parentNode.replaceChild(proto.cloneNode(true), el);
			} else {
				el.appendChild(svg["path"]("M35 17c0 9.389-7.611 17-17 17-9.388 0-17-7.611-17-17C1 7.612 8.612 0 18 0c9.389 0 17 7.612 17 17", {["fill"]: "#FFCC4D",["d"]: "M35 17c0 9.389-7.611 17-17 17-9.388 0-17-7.611-17-17C1 7.612 8.612 0 18 0c9.389 0 17 7.612 17 17",}));el.appendChild(svg["ellipse"](18, 19.5, 14, 15, {["rx"]: "7",["cy"]: "19.5",["ry"]: "7.5",["fill"]: "#664500",["cx"]: "18",}));el.appendChild(svg["path"]("M22.468 27.371s.997-.721.165-1.614c-.832-.893-1.621.052-1.621.052l-4.148 3.866c-.069-.205-.459-.743-.55-.947l5.755-5.366s.998-.721.164-1.615c-.832-.892-1.622.051-1.622.051l-5.413 5.046c-.125-.158-.461-.54-.594-.698l6.276-5.85s.997-.722.164-1.614c-.832-.893-1.621.051-1.621.051l-6.278 5.848c-.15-.145-.612-.609-.764-.746l5.866-5.468s.996-.722.164-1.614c-.833-.893-1.621.051-1.621.051l-6.203 5.781-.497.464-.22.207s-.538.744-1.087.179l1.842-4.158s.58-1.074-.493-1.655c-1.075-.581-1.655.493-1.655.493l-1.668 2.758c-.663 1.093-1.349 2.178-2.159 3.167-2.284 2.793-2.211 6.914.318 9.629 2.759 2.959 7.396 3.122 10.355.364l.447-.418 6.698-6.244z", {["fill"]: "#F4900C",["d"]: "M22.468 27.371s.997-.721.165-1.614c-.832-.893-1.621.052-1.621.052l-4.148 3.866c-.069-.205-.459-.743-.55-.947l5.755-5.366s.998-.721.164-1.615c-.832-.892-1.622.051-1.622.051l-5.413 5.046c-.125-.158-.461-.54-.594-.698l6.276-5.85s.997-.722.164-1.614c-.832-.893-1.621.051-1.621.051l-6.278 5.848c-.15-.145-.612-.609-.764-.746l5.866-5.468s.996-.722.164-1.614c-.833-.893-1.621.051-1.621.051l-6.203 5.781-.497.464-.22.207s-.538.744-1.087.179l1.842-4.158s.58-1.074-.493-1.655c-1.075-.581-1.655.493-1.655.493l-1.668 2.758c-.663 1.093-1.349 2.178-2.159 3.167-2.284 2.793-2.211 6.914.318 9.629 2.759 2.959 7.396 3.122 10.355.364l.447-.418 6.698-6.244z",}));el.appendChild(svg["path"]("M11.016 6.08c-2.255.604-3.48 1.965-3.555 2.05-.364.415-.323 1.047.091 1.412.415.365 1.046.325 1.411-.091.079-.087 2.09-2.253 5.81-1.492.542.111 1.07-.239 1.18-.779.111-.541-.238-1.07-.779-1.18-1.635-.336-3.026-.223-4.158.08zm13.968.001c-1.132-.303-2.523-.416-4.159-.082-.541.111-.89.639-.779 1.18.112.541.639.89 1.18.779 3.724-.762 5.731 1.405 5.814 1.497.367.407 1 .444 1.41.078.41-.366.451-.991.088-1.404-.075-.084-1.3-1.444-3.554-2.048z", {["fill"]: "#664500",["d"]: "M11.016 6.08c-2.255.604-3.48 1.965-3.555 2.05-.364.415-.323 1.047.091 1.412.415.365 1.046.325 1.411-.091.079-.087 2.09-2.253 5.81-1.492.542.111 1.07-.239 1.18-.779.111-.541-.238-1.07-.779-1.18-1.635-.336-3.026-.223-4.158.08zm13.968.001c-1.132-.303-2.523-.416-4.159-.082-.541.111-.89.639-.779 1.18.112.541.639.89 1.18.779 3.724-.762 5.731 1.405 5.814 1.497.367.407 1 .444 1.41.078.41-.366.451-.991.088-1.404-.075-.084-1.3-1.444-3.554-2.048z",}));
				proto = el;
			}
		},
	};
	delete new_props.options;

	return h("svg", new_props);
};