import { h } from "/assets/js/vendor/hyperapp.js";
import rough from "/assets/js/vendor/rough.js";
import uuid from "/assets/js/vendor/uuid.js";

export default (props = {}) => {
	let proto;
	const new_props = {
		...props,
		key: props.key || uuid(),
		xmlns: "http://www.w3.org/2000/svg",
		viewBox: "-1 -1 37 37",
		width: (props.size || 1) * 16,
		height: (props.size || 1) * 16,
		oncreate: el => {
			const svg = rough.svg(el, {
				options: props.options || {
					roughness: 0.1,
					strokeWidth: 0.2,
					fillStyle: "solid",
				}
			});

			if (proto) {
				el.parentNode.replaceChild(proto.cloneNode(true), el);
			} else {
				el.appendChild(svg["path"]("M35 5.904c2.394 6.042-1.438 20.543-10.5 26.5-9.06 5.957-20.395 3.573-23.097-6.443-1.669-6.186 2.79-10.721 11.851-16.677C22.315 3.327 32.64-.053 35 5.904z", {["fill"]: "#3E721D",["d"]: "M35 5.904c2.394 6.042-1.438 20.543-10.5 26.5-9.06 5.957-20.395 3.573-23.097-6.443-1.669-6.186 2.79-10.721 11.851-16.677C22.315 3.327 32.64-.053 35 5.904z",}));el.appendChild(svg["path"]("M20.605 26.03c-6.523 4.546-15.287 5.15-18.469.582-3.183-4.566.418-12.578 6.943-17.124 6.522-4.545 21.951-9.796 25.134-5.23 3.183 4.57-7.085 17.226-13.608 21.772", {["fill"]: "#3E721D",["d"]: "M20.605 26.03c-6.523 4.546-15.287 5.15-18.469.582-3.183-4.566.418-12.578 6.943-17.124 6.522-4.545 21.951-9.796 25.134-5.23 3.183 4.57-7.085 17.226-13.608 21.772",}));el.appendChild(svg["path"]("M19.815 26.578c-5.757 4.013-13.482 3.097-16.29-.934C.718 21.613 4 14.474 9.757 10.463c5.755-4.011 20.258-9.264 23.068-5.234 2.807 4.03-4.825 16.175-13.01 21.349", {["fill"]: "#A6D388",["d"]: "M19.815 26.578c-5.757 4.013-13.482 3.097-16.29-.934C.718 21.613 4 14.474 9.757 10.463c5.755-4.011 20.258-9.264 23.068-5.234 2.807 4.03-4.825 16.175-13.01 21.349",}));el.appendChild(svg["path"]("M18.169 23.926c-4.506 3.14-9.939 3.127-12.136-.027-2.2-3.154-.33-8.255 4.176-11.395 4.507-3.141 15.835-7.238 18.035-4.084 2.199 3.154-5.567 12.366-10.075 15.506z", {["fill"]: "#C6E5B3",["d"]: "M18.169 23.926c-4.506 3.14-9.939 3.127-12.136-.027-2.2-3.154-.33-8.255 4.176-11.395 4.507-3.141 15.835-7.238 18.035-4.084 2.199 3.154-5.567 12.366-10.075 15.506z",}));el.appendChild(svg["path"]("M11.162 12.488c3.48-2.332 7.382-1.495 9.798.995 1.433 1.477-.88 5.382-4.359 7.714-3.478 2.33-7.769 1.763-8.239.731-1.44-3.157-.677-7.109 2.8-9.44z", {["fill"]: "#662113",["d"]: "M11.162 12.488c3.48-2.332 7.382-1.495 9.798.995 1.433 1.477-.88 5.382-4.359 7.714-3.478 2.33-7.769 1.763-8.239.731-1.44-3.157-.677-7.109 2.8-9.44z",}));el.appendChild(svg["path"]("M13.071 13.106c1.51-1.013 3.414-.819 4.254.431.837 1.251.294 3.087-1.217 4.1-1.51 1.01-3.414.817-4.253-.433-.839-1.252-.294-3.086 1.216-4.098z", {["fill"]: "#7C3225",["d"]: "M13.071 13.106c1.51-1.013 3.414-.819 4.254.431.837 1.251.294 3.087-1.217 4.1-1.51 1.01-3.414.817-4.253-.433-.839-1.252-.294-3.086 1.216-4.098z",}));
				proto = el;
			}
		},
	};
	delete new_props.options;

	return h("svg", new_props);
};