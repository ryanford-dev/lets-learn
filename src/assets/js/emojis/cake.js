import { h } from "/assets/js/vendor/hyperapp.js";
import rough from "/assets/js/vendor/rough.js";
import uuid from "/assets/js/vendor/uuid.js";

export default (props = {}) => {
	let proto;
	const new_props = {
		...props,
		key: props.key || uuid(),
		xmlns: "http://www.w3.org/2000/svg",
		viewBox: "-1 -1 37 37",
		width: (props.size || 1) * 16,
		height: (props.size || 1) * 16,
		oncreate: el => {
			const svg = rough.svg(el, {
				options: props.options || {
					roughness: 0.1,
					strokeWidth: 0.2,
					fillStyle: "solid",
				}
			});

			if (proto) {
				el.parentNode.replaceChild(proto.cloneNode(true), el);
			} else {
				el.appendChild(svg["ellipse"](18, 25, 36, 20, {["rx"]: "18",["cy"]: "25",["ry"]: "10",["fill"]: "#939598",["cx"]: "18",}));el.appendChild(svg["ellipse"](18, 23, 36, 20, {["rx"]: "18",["cy"]: "23",["ry"]: "10",["fill"]: "#F1F2F2",["cx"]: "18",}));el.appendChild(svg["ellipse"](18, 22.611, 29.6, 15.222, {["rx"]: "14.8",["cy"]: "22.611",["ry"]: "7.611",["fill"]: "#FFF",["cx"]: "18",}));el.appendChild(svg["path"]("M8 28c0-3.044.417-7.208.042-13.875.601-1.377 6.146-2.472 6.625-3.792C15.954 6.787 13.458 4.417 16 2c2.05-1.949 5-2 6 1 2-2 6-1 6 2 4-1 6 3 3 6 0 1-1 9-1 11s-.208 1.792-5.208 2.792S8 28 8 28z", {["fill"]: "#E1E8ED",["d"]: "M8 28c0-3.044.417-7.208.042-13.875.601-1.377 6.146-2.472 6.625-3.792C15.954 6.787 13.458 4.417 16 2c2.05-1.949 5-2 6 1 2-2 6-1 6 2 4-1 6 3 3 6 0 1-1 9-1 11s-.208 1.792-5.208 2.792S8 28 8 28z",}));el.appendChild(svg["path"]("M8 27V15s21-7 21-2.458V23L8 27z", {["fill"]: "#FFAC33",["d"]: "M8 27V15s21-7 21-2.458V23L8 27z",}));el.appendChild(svg["path"]("M8 26V16s12.375-4.208 20-4v10L8 26z", {["fill"]: "#FFD983",["d"]: "M8 26V16s12.375-4.208 20-4v10L8 26z",}));el.appendChild(svg["path"]("M8 21v-1l21-4v1z", {["fill"]: "#FFAC33",["d"]: "M8 21v-1l21-4v1z",}));el.appendChild(svg["path"]("M8 14l9-9c2 0 8 1 11 5L8 14z", {["fill"]: "#E1E8ED",["d"]: "M8 14l9-9c2 0 8 1 11 5L8 14z",}));el.appendChild(svg["path"]("M30 10c1-1 1-5-3-4 0-1-2-4-5-2 0-1-5-2-6 0 10 3 14 6 14 6z", {["fill"]: "#FFF",["d"]: "M30 10c1-1 1-5-3-4 0-1-2-4-5-2 0-1-5-2-6 0 10 3 14 6 14 6z",}));el.appendChild(svg["path"]("M17.958 10.458c-1.833-.208-4.417-1.083-3.917-3.5s2.474-4.881 3.75-5.542C18.917.833 20.117 1.26 21 4.667c.583 2.25 2.75 5.125-1.667 5.75-.458 0-1.375.041-1.375.041z", {["fill"]: "#DD2E44",["d"]: "M17.958 10.458c-1.833-.208-4.417-1.083-3.917-3.5s2.474-4.881 3.75-5.542C18.917.833 20.117 1.26 21 4.667c.583 2.25 2.75 5.125-1.667 5.75-.458 0-1.375.041-1.375.041z",}));el.appendChild(svg["path"]("M18.375 5.042c-.152 0-.302-.069-.4-.2l-.5-.667c-.166-.221-.121-.534.1-.7.221-.167.534-.122.7.1l.5.667c.166.221.121.534-.1.7-.09.067-.195.1-.3.1zm-2.416 3.5c-.042 0-.084-.005-.127-.016-.267-.07-.427-.343-.357-.61l.25-.958c.069-.267.344-.426.61-.357.267.07.427.343.357.61l-.25.958c-.058.224-.261.373-.483.373zm4.374.083c-.089 0-.18-.023-.261-.073l-.75-.458c-.235-.144-.31-.452-.166-.688.146-.236.453-.31.688-.166l.75.458c.235.144.309.452.166.688-.095.154-.259.239-.427.239z", {["fill"]: "#F4ABBA",["d"]: "M18.375 5.042c-.152 0-.302-.069-.4-.2l-.5-.667c-.166-.221-.121-.534.1-.7.221-.167.534-.122.7.1l.5.667c.166.221.121.534-.1.7-.09.067-.195.1-.3.1zm-2.416 3.5c-.042 0-.084-.005-.127-.016-.267-.07-.427-.343-.357-.61l.25-.958c.069-.267.344-.426.61-.357.267.07.427.343.357.61l-.25.958c-.058.224-.261.373-.483.373zm4.374.083c-.089 0-.18-.023-.261-.073l-.75-.458c-.235-.144-.31-.452-.166-.688.146-.236.453-.31.688-.166l.75.458c.235.144.309.452.166.688-.095.154-.259.239-.427.239z",}));
				proto = el;
			}
		},
	};
	delete new_props.options;

	return h("svg", new_props);
};