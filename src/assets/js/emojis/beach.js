import { h } from "/assets/js/vendor/hyperapp.js";
import rough from "/assets/js/vendor/rough.js";
import uuid from "/assets/js/vendor/uuid.js";

export default (props = {}) => {
	let proto;
	const new_props = {
		...props,
		key: props.key || uuid(),
		xmlns: "http://www.w3.org/2000/svg",
		viewBox: "-1 -1 37 37",
		width: (props.size || 1) * 16,
		height: (props.size || 1) * 16,
		oncreate: el => {
			const svg = rough.svg(el, {
				options: props.options || {
					roughness: 0.1,
					strokeWidth: 0.2,
					fillStyle: "solid",
				}
			});

			if (proto) {
				el.parentNode.replaceChild(proto.cloneNode(true), el);
			} else {
				el.appendChild(svg["ellipse"](18, 30.54, 36, 10.72, {["rx"]: "18",["cy"]: "30.54",["ry"]: "5.36",["fill"]: "#3B88C3",["cx"]: "18",}));el.appendChild(svg["path"]("M33.813 28.538c0 1.616-2.5 2.587-14.482 2.587-10.925 0-13.612-.971-13.612-2.587s5.683-2.926 13.612-2.926 14.482 1.31 14.482 2.926z", {["fill"]: "#88C9F9",["d"]: "M33.813 28.538c0 1.616-2.5 2.587-14.482 2.587-10.925 0-13.612-.971-13.612-2.587s5.683-2.926 13.612-2.926 14.482 1.31 14.482 2.926z",}));el.appendChild(svg["path"]("M7 28.25c0-1 1-5 11-5 12 0 15 4 15 5s0 2-14 2c-12 0-12-1-12-2z", {["fill"]: "#F4900C",["d"]: "M7 28.25c0-1 1-5 11-5 12 0 15 4 15 5s0 2-14 2c-12 0-12-1-12-2z",}));el.appendChild(svg["path"]("M20.62 27.667c-.15.692-.835 1.133-1.527.982-.693-.15-1.133-.834-.983-1.527l5.083-25.985c.15-.693.834-1.132 1.527-.982.691.15 1.133.834.981 1.527L20.62 27.667z", {["fill"]: "#66757F",["d"]: "M20.62 27.667c-.15.692-.835 1.133-1.527.982-.693-.15-1.133-.834-.983-1.527l5.083-25.985c.15-.693.834-1.132 1.527-.982.691.15 1.133.834.981 1.527L20.62 27.667z",}));el.appendChild(svg["path"]("M24.358 1.827C16.736.173 9.501 3.7 8.198 9.705c0 0-.363 1.672.474 1.854.836.182 2.872-1.128 2.872-1.128l20.908 4.538s1.309 2.036 2.146 2.218c.837.182 1.199-1.491 1.199-1.491C37.101 9.69 31.979 3.481 24.358 1.827z", {["fill"]: "#DD2E44",["d"]: "M24.358 1.827C16.736.173 9.501 3.7 8.198 9.705c0 0-.363 1.672.474 1.854.836.182 2.872-1.128 2.872-1.128l20.908 4.538s1.309 2.036 2.146 2.218c.837.182 1.199-1.491 1.199-1.491C37.101 9.69 31.979 3.481 24.358 1.827z",}));el.appendChild(svg["path"]("M24.358 1.827C18.584.574 12.847 4.426 11.544 10.43c0 0-.363 1.673 1.31 2.036 1.673.364 4.545-.765 4.545-.765l9.199 1.997s2.146 2.217 3.819 2.581c1.673.362 2.035-1.311 2.035-1.311 1.303-6.004-2.321-11.888-8.094-13.141z", {["fill"]: "#FFE8B6",["d"]: "M24.358 1.827C18.584.574 12.847 4.426 11.544 10.43c0 0-.363 1.673 1.31 2.036 1.673.364 4.545-.765 4.545-.765l9.199 1.997s2.146 2.217 3.819 2.581c1.673.362 2.035-1.311 2.035-1.311 1.303-6.004-2.321-11.888-8.094-13.141z",}));el.appendChild(svg["path"]("M24.358 1.827c-3.003-.651-5.657 3.87-6.96 9.874 0 0 2.146 2.218 3.818 2.58l.837.183c1.673.362 4.544-.766 4.544-.766 1.304-6.004.764-11.219-2.239-11.871z", {["fill"]: "#DD2E44",["d"]: "M24.358 1.827c-3.003-.651-5.657 3.87-6.96 9.874 0 0 2.146 2.218 3.818 2.58l.837.183c1.673.362 4.544-.766 4.544-.766 1.304-6.004.764-11.219-2.239-11.871z",}));el.appendChild(svg["path"]("M15.844 27.948c.469-.427 1.75-.326 2.5-.602s1.219-.627 1.844-.376.812.627 1.406.678 1.031.402.781.678-2.219.376-3.531.376-3.579-.226-3-.754z", {["fill"]: "#FFAC33",["d"]: "M15.844 27.948c.469-.427 1.75-.326 2.5-.602s1.219-.627 1.844-.376.812.627 1.406.678 1.031.402.781.678-2.219.376-3.531.376-3.579-.226-3-.754z",}));
				proto = el;
			}
		},
	};
	delete new_props.options;

	return h("svg", new_props);
};