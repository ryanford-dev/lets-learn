import { h } from "/assets/js/vendor/hyperapp.js";
import rough from "/assets/js/vendor/rough.js";
import uuid from "/assets/js/vendor/uuid.js";

export default (props = {}) => {
	let proto;
	const new_props = {
		...props,
		key: props.key || uuid(),
		xmlns: "http://www.w3.org/2000/svg",
		viewBox: "-1 -1 37 37",
		width: (props.size || 1) * 16,
		height: (props.size || 1) * 16,
		oncreate: el => {
			const svg = rough.svg(el, {
				options: props.options || {
					roughness: 0.1,
					strokeWidth: 0.2,
					fillStyle: "solid",
				}
			});

			if (proto) {
				el.parentNode.replaceChild(proto.cloneNode(true), el);
			} else {
				el.appendChild(svg["path"]("M2.38 33.16c-.512-.324 1.13-3.04 1.453-3.577L20.039 1.78C20.972.231 21.976.229 22.886.806c.91.577 1.336 1.485.334 2.99L5.083 30.25c-.347.521-2.191 3.234-2.703 2.91z", {["fill"]: "#C1694F",["d"]: "M2.38 33.16c-.512-.324 1.13-3.04 1.453-3.577L20.039 1.78C20.972.231 21.976.229 22.886.806c.91.577 1.336 1.485.334 2.99L5.083 30.25c-.347.521-2.191 3.234-2.703 2.91z",}));el.appendChild(svg["path"]("M22.885.805c-.91-.577-1.913-.575-2.846.974l-3.356 5.758c.335.921 1.924 1.75 2.901 1.562l3.636-5.304c1.002-1.505.575-2.413-.335-2.99z", {["fill"]: "#662113",["d"]: "M22.885.805c-.91-.577-1.913-.575-2.846.974l-3.356 5.758c.335.921 1.924 1.75 2.901 1.562l3.636-5.304c1.002-1.505.575-2.413-.335-2.99z",}));el.appendChild(svg["path"]("M5.584 35.198c-.414-.443 1.885-2.593 2.333-3.031l22.649-22.9c1.293-1.265 2.265-1.014 3-.227.736.787.92 1.773-.429 2.978L8.542 33.33c-.468.417-2.545 2.311-2.958 1.868z", {["fill"]: "#C1694F",["d"]: "M5.584 35.198c-.414-.443 1.885-2.593 2.333-3.031l22.649-22.9c1.293-1.265 2.265-1.014 3-.227.736.787.92 1.773-.429 2.978L8.542 33.33c-.468.417-2.545 2.311-2.958 1.868z",}));el.appendChild(svg["path"]("M33.566 9.04c-.736-.787-1.707-1.037-3 .227l-4.576 4.627c.057.93 1.498 2.183 2.376 2.259l4.772-4.135c1.348-1.205 1.164-2.191.428-2.978z", {["fill"]: "#662113",["d"]: "M33.566 9.04c-.736-.787-1.707-1.037-3 .227l-4.576 4.627c.057.93 1.498 2.183 2.376 2.259l4.772-4.135c1.348-1.205 1.164-2.191.428-2.978z",}));
				proto = el;
			}
		},
	};
	delete new_props.options;

	return h("svg", new_props);
};