import { h } from "/assets/js/vendor/hyperapp.js";
import rough from "/assets/js/vendor/rough.js";
import uuid from "/assets/js/vendor/uuid.js";

export default (props = {}) => {
	let proto;
	const new_props = {
		...props,
		key: props.key || uuid(),
		xmlns: "http://www.w3.org/2000/svg",
		viewBox: "-1 -1 37 37",
		width: (props.size || 1) * 16,
		height: (props.size || 1) * 16,
		oncreate: el => {
			const svg = rough.svg(el, {
				options: props.options || {
					roughness: 0.1,
					strokeWidth: 0.2,
					fillStyle: "solid",
				}
			});

			if (proto) {
				el.parentNode.replaceChild(proto.cloneNode(true), el);
			} else {
				el.appendChild(svg["path"]("M13.193 8.624S14.75 7 18 7s4.955 1.692 4.955 1.692l.186.136s1.906-3.594.517-6.659C22.593 1.464 20.661.5 18 .5c-2.554 0-4.451.893-5.54 1.589-1.507 3.068.509 6.661.509 6.661l.224-.126z", {["fill"]: "#FFAC33",["d"]: "M13.193 8.624S14.75 7 18 7s4.955 1.692 4.955 1.692l.186.136s1.906-3.594.517-6.659C22.593 1.464 20.661.5 18 .5c-2.554 0-4.451.893-5.54 1.589-1.507 3.068.509 6.661.509 6.661l.224-.126z",}));el.appendChild(svg["path"]("M24.685 2.975l-.086-.083c-.035-.034-.368-.343-.941-.722.058.298.157.729.218 1.237.178 1.473.084 3.228-.921 5.285-.24.491-.516.994-.87 1.52-.608.902-2.135 2.838-3.975 5.105-1.255 1.546-2.653 3.244-4.009 4.88-3.278 3.953-6.297 7.525-6.357 7.596-.124.145-.154.347-.08.52l3 7c.072.166.228.281.408.3.018.002.034.003.052.003.162 0 .315-.078.409-.213.052-.074 3.305-4.751 6.569-9.447l4.01-5.771c1.465-2.11 2.516-3.624 2.619-3.778 1.518-2.261 3.237-4.574 3.237-7.042 0-2.477-1.135-4.687-3.283-6.39z", {["fill"]: "#FFCC4D",["d"]: "M24.685 2.975l-.086-.083c-.035-.034-.368-.343-.941-.722.058.298.157.729.218 1.237.178 1.473.084 3.228-.921 5.285-.24.491-.516.994-.87 1.52-.608.902-2.135 2.838-3.975 5.105-1.255 1.546-2.653 3.244-4.009 4.88-3.278 3.953-6.297 7.525-6.357 7.596-.124.145-.154.347-.08.52l3 7c.072.166.228.281.408.3.018.002.034.003.052.003.162 0 .315-.078.409-.213.052-.074 3.305-4.751 6.569-9.447l4.01-5.771c1.465-2.11 2.516-3.624 2.619-3.778 1.518-2.261 3.237-4.574 3.237-7.042 0-2.477-1.135-4.687-3.283-6.39z",}));el.appendChild(svg["path"]("M13.254 21.215l3.965 6.012 5.448-7.84-3.979-4.786c-.19.235-5.155 6.278-5.434 6.614z", {["fill"]: "#FFAC33",["d"]: "M13.254 21.215l3.965 6.012 5.448-7.84-3.979-4.786c-.19.235-5.155 6.278-5.434 6.614z",}));el.appendChild(svg["path"]("M11.449 2.891l.086-.083c.035-.034.368-.343.941-.722-.058.298-.157.729-.218 1.237-.178 1.473-.084 3.228.921 5.285.24.491.516.994.87 1.52.608.902 2.135 2.838 3.975 5.105 1.255 1.546 2.653 3.244 4.009 4.88 3.278 3.953 6.297 7.525 6.357 7.596.122.145.152.347.078.521l-3 7c-.072.166-.228.281-.408.3-.018.002-.034.003-.052.003-.162 0-.315-.078-.409-.213-.052-.074-3.305-4.751-6.569-9.447l-4.01-5.771c-1.465-2.11-2.516-3.624-2.619-3.778-1.518-2.261-3.237-4.574-3.237-7.042.002-2.477 1.137-4.688 3.285-6.391z", {["fill"]: "#FFCC4D",["d"]: "M11.449 2.891l.086-.083c.035-.034.368-.343.941-.722-.058.298-.157.729-.218 1.237-.178 1.473-.084 3.228.921 5.285.24.491.516.994.87 1.52.608.902 2.135 2.838 3.975 5.105 1.255 1.546 2.653 3.244 4.009 4.88 3.278 3.953 6.297 7.525 6.357 7.596.122.145.152.347.078.521l-3 7c-.072.166-.228.281-.408.3-.018.002-.034.003-.052.003-.162 0-.315-.078-.409-.213-.052-.074-3.305-4.751-6.569-9.447l-4.01-5.771c-1.465-2.11-2.516-3.624-2.619-3.778-1.518-2.261-3.237-4.574-3.237-7.042.002-2.477 1.137-4.688 3.285-6.391z",}));
				proto = el;
			}
		},
	};
	delete new_props.options;

	return h("svg", new_props);
};