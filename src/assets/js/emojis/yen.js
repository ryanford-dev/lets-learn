import { h } from "/assets/js/vendor/hyperapp.js";
import rough from "/assets/js/vendor/rough.js";
import uuid from "/assets/js/vendor/uuid.js";

export default (props = {}) => {
	let proto;
	const new_props = {
		...props,
		key: props.key || uuid(),
		xmlns: "http://www.w3.org/2000/svg",
		viewBox: "-1 -1 37 37",
		width: (props.size || 1) * 16,
		height: (props.size || 1) * 16,
		oncreate: el => {
			const svg = rough.svg(el, {
				options: props.options || {
					roughness: 0.1,
					strokeWidth: 0.2,
					fillStyle: "solid",
				}
			});

			if (proto) {
				el.parentNode.replaceChild(proto.cloneNode(true), el);
			} else {
				el.appendChild(svg["path"]("M2 6C0 6 0 8 0 8v20s0 2 2 2h32c2 0 2-2 2-2V8s0-2-2-2H2z", {["fill"]: "#FDD888",["d"]: "M2 6C0 6 0 8 0 8v20s0 2 2 2h32c2 0 2-2 2-2V8s0-2-2-2H2z",}));el.appendChild(svg["path"]("M13 6h10v24.062H13z", {["fill"]: "#9AAAB4",["d"]: "M13 6h10v24.062H13z",}));el.appendChild(svg["path"]("M5.743 18.143H3.369c-.398 0-.709-.189-.709-.57 0-.383.312-.573.709-.573h1.664l-2.772-4.28c-.174-.26-.261-.45-.261-.693 0-.33.33-.573.607-.573.278 0 .554.122.797.485l3.102 4.662 3.102-4.662c.243-.364.52-.485.797-.485.276 0 .605.243.605.573 0 .243-.086.432-.259.691l-2.772 4.28h1.664c.399 0 .711.191.711.573 0 .381-.312.57-.711.57H7.269v1.23h2.373c.399 0 .711.192.711.573 0 .381-.312.571-.711.571H7.269v2.668c0 .504-.312.817-.764.817-.451 0-.762-.313-.762-.815v-2.668H3.369c-.398 0-.709-.19-.709-.571 0-.381.312-.573.709-.573h2.375v-1.23z", {["fill"]: "#67757F",["d"]: "M5.743 18.143H3.369c-.398 0-.709-.189-.709-.57 0-.383.312-.573.709-.573h1.664l-2.772-4.28c-.174-.26-.261-.45-.261-.693 0-.33.33-.573.607-.573.278 0 .554.122.797.485l3.102 4.662 3.102-4.662c.243-.364.52-.485.797-.485.276 0 .605.243.605.573 0 .243-.086.432-.259.691l-2.772 4.28h1.664c.399 0 .711.191.711.573 0 .381-.312.57-.711.57H7.269v1.23h2.373c.399 0 .711.192.711.573 0 .381-.312.571-.711.571H7.269v2.668c0 .504-.312.817-.764.817-.451 0-.762-.313-.762-.815v-2.668H3.369c-.398 0-.709-.19-.709-.571 0-.381.312-.573.709-.573h2.375v-1.23z",}));
				proto = el;
			}
		},
	};
	delete new_props.options;

	return h("svg", new_props);
};