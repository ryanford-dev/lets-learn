import { h } from "/assets/js/vendor/hyperapp.js";
import rough from "/assets/js/vendor/rough.js";
import uuid from "/assets/js/vendor/uuid.js";

export default (props = {}) => {
	let proto;
	const new_props = {
		...props,
		key: props.key || uuid(),
		xmlns: "http://www.w3.org/2000/svg",
		viewBox: "-1 -1 37 37",
		width: (props.size || 1) * 16,
		height: (props.size || 1) * 16,
		oncreate: el => {
			const svg = rough.svg(el, {
				options: props.options || {
					roughness: 0.1,
					strokeWidth: 0.2,
					fillStyle: "solid",
				}
			});

			if (proto) {
				el.parentNode.replaceChild(proto.cloneNode(true), el);
			} else {
				el.appendChild(svg["path"]("M35 35c1-1 0-2 0-2L9 7S7.521 5.479 9 4s3 0 3 0 1 1 2 0 0-2 0-2-3.521-3.479-7 0C3.5 5.5 7 9 7 9l26 26s1 1 2 0z", {["fill"]: "#66757F",["d"]: "M35 35c1-1 0-2 0-2L9 7S7.521 5.479 9 4s3 0 3 0 1 1 2 0 0-2 0-2-3.521-3.479-7 0C3.5 5.5 7 9 7 9l26 26s1 1 2 0z",}));el.appendChild(svg["path"]("M7.367 18.102L9 17.559V16c0-.918.625-1.718 1.515-1.94l2.836-.709.709-2.836C14.282 9.625 15.082 9 16 9h1.559l.544-1.632c.256-.768.949-1.305 1.756-1.363.047-.004.094-.005.141-.005.753 0 1.448.425 1.789 1.105L34 32l-2 2L7.106 21.789c-.724-.362-1.158-1.124-1.101-1.931.057-.806.596-1.5 1.362-1.756z", {["fill"]: "#9266CC",["d"]: "M7.367 18.102L9 17.559V16c0-.918.625-1.718 1.515-1.94l2.836-.709.709-2.836C14.282 9.625 15.082 9 16 9h1.559l.544-1.632c.256-.768.949-1.305 1.756-1.363.047-.004.094-.005.141-.005.753 0 1.448.425 1.789 1.105L34 32l-2 2L7.106 21.789c-.724-.362-1.158-1.124-1.101-1.931.057-.806.596-1.5 1.362-1.756z",}));el.appendChild(svg["path"]("M33 33L13.351 13.351l.709-2.836C14.282 9.625 15.082 9 16 9h1.559l.051-.154 15.986 23.558L33 33zm-1 1L7.106 21.789c-.724-.362-1.158-1.124-1.101-1.931.058-.807.596-1.5 1.362-1.756L9 17.559v-.174l23.409 16.206L32 34z", {["fill"]: "#744EAA",["d"]: "M33 33L13.351 13.351l.709-2.836C14.282 9.625 15.082 9 16 9h1.559l.051-.154 15.986 23.558L33 33zm-1 1L7.106 21.789c-.724-.362-1.158-1.124-1.101-1.931.058-.807.596-1.5 1.362-1.756L9 17.559v-.174l23.409 16.206L32 34z",}));
				proto = el;
			}
		},
	};
	delete new_props.options;

	return h("svg", new_props);
};